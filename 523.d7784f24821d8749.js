"use strict";(self.webpackChunkhelena=self.webpackChunkhelena||[]).push([[523],{8523:(ve,S,c)=>{c.r(S),c.d(S,{CustomerForumModule:()=>Re});var u=c(6895),g=c(9132),a=c(4006),M=c(248),R=c(7579),E=c(4968),w=c(5734),m=c(2722),O=c(9300),I=c(8372),B=c(1884),P=c(8505),e=c(4650),l=c(2542),f=c(2340),G=c(529),_=c(1323);let C=(()=>{class o{constructor(t,s){this._http=t,this.appStore=s,this.postFilter=new R.x}submitPost(t){return this._http.post(`${f.N.baseUrl}posts?code=${this.appStore?.envConfigs?.function_codes?.posts}`,t)}getPosts(t){return this._http.get(`${f.N.baseUrl}posts?code=${this.appStore?.envConfigs?.function_codes?.posts}`,{params:t})}deletePost(t){return this._http.delete(`${f.N.baseUrl}posts?code=${this.appStore?.envConfigs?.function_codes?.posts}`,{body:{user_id:this.appStore.user._id,post_id:t._id}})}updateLike(t){return this._http.put(`${f.N.baseUrl}likes?code=${this.appStore?.envConfigs?.function_codes?.likes}`,t)}getLikeCounts(t){return this._http.get(`${f.N.baseUrl}likes?code=${this.appStore?.envConfigs?.function_codes?.likes}`,{params:{post:t}})}deleteReply(t){return this._http.delete(`${f.N.baseUrl}posts-reply?code=${this.appStore?.envConfigs?.function_codes?.postReply}`,{body:{user_id:this.appStore.user._id,reply_id:t._id}})}submitReply(t){return this._http.post(`${f.N.baseUrl}posts-reply?code=${this.appStore?.envConfigs?.function_codes?.postReply}`,t)}fetchUserImage(t){return this._http.get("https://devcust360drive.blob.core.windows.net/assets/"+t+".jpg")}getReplies(t){return this._http.get(`${f.N.baseUrl}posts-reply?code=${this.appStore?.envConfigs?.function_codes?.postReply}`,{params:{post:t}})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(G.eN),e.LFG(_.d))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var v=c(533),h=c(3081),y=c(4069),A=c(9549),k=c(4144),F=c(8255),U=c(7392),b=c(4859),J=c(659);function L(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.deletePost(r.post))}),e.TgZ(1,"mat-icon",31),e._uU(2,"delete"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&o&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"Delete Post")," "))}function q(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"button",25)(2,"mat-icon",26),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",27,28),e.YNc(6,L,5,3,"button",29),e.qZA(),e.BQk()),2&o){const t=e.MAs(5),s=e.oxw();e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(5),e.Q6J("ngIf",(null==s.post||null==s.post.user?null:s.post.user._id)==(null==s.appStore||null==s.appStore.user?null:s.appStore.user._id))}}function Q(o,n){1&o&&(e.ynx(0),e.TgZ(1,"span",32),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"No tags")," "))}function H(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",33),e.NdJ("click",function(){const i=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.triggerPostTagFilter(i))}),e._uU(2),e.qZA(),e._UZ(3,"div",34),e.BQk()}if(2&o){const t=n.$implicit;e.xp6(2),e.hij(" ",null==t?null:t.name," ")}}function D(o,n){1&o&&(e.ynx(0),e.TgZ(1,"div",35),e._uU(2,"Liked"),e.qZA(),e.BQk())}const Y=function(o){return{flipVertical:o}};function $(o,n){if(1&o&&(e.ynx(0),e._UZ(1,"i",36),e._uU(2),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,Y,!t.post.showHideReplySection)),e.xp6(1),e.AsE(" ",t.post.showHideReplySection?"Hide All Replies":"Show All Replies"," (",null==t.post?null:t.post.replies,") ")}}function X(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit,i=e.oxw(2);return e.KtG(i.deleteReply(r,i.post))}),e.TgZ(1,"mat-icon",31),e._uU(2,"delete"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&o&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"Delete Reply")," "))}function j(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"button",41)(2,"mat-icon",42),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",27,28),e.YNc(6,X,5,3,"button",43),e.qZA(),e.BQk()),2&o){const t=e.MAs(5),s=e.oxw().$implicit,r=e.oxw(2);e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(5),e.Q6J("ngIf",(null==s||null==s.user?null:s.user._id)==(null==r.appStore||null==r.appStore.user?null:r.appStore.user._id))}}function K(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",38)(2,"div",39),e._UZ(3,"div"),e.ALo(4,"uppercase"),e._UZ(5,"div",4),e.TgZ(6,"div",5),e._uU(7),e.TgZ(8,"div",40),e._uU(9),e.ALo(10,"date"),e.ALo(11,"dateAgo"),e.qZA()()(),e.TgZ(12,"div",7),e.YNc(13,j,7,2,"ng-container",8),e.qZA()(),e.TgZ(14,"div",9),e._uU(15),e.qZA(),e.BQk()),2&o){const t=n.$implicit,s=n.index,r=e.oxw(2);e.xp6(1),e.MGl("id","replyPosts",s,""),e.xp6(2),e.uIk("post-letters",e.lcZ(4,8,(null==t||null==t.user?null:t.user.first_name[0])+""+(null==t||null==t.user?null:t.user.last_name[0]))),e.xp6(4),e.AsE(" ",null==t||null==t.user?null:t.user.first_name," ",null==t||null==t.user?null:t.user.last_name," "),e.xp6(2),e.AsE(" ",e.xi3(10,10,null==t?null:t.createdAt,"MMM d, YYY hh:mm a")," | ",e.lcZ(11,13,null==t?null:t.createdAt)," "),e.xp6(4),e.Q6J("ngIf",(null==t||null==t.user?null:t.user._id)==(null==r.appStore||null==r.appStore.user?null:r.appStore.user._id)),e.xp6(2),e.hij(" ",null==t?null:t.reply," ")}}function V(o,n){if(1&o&&(e.TgZ(0,"article",37),e.YNc(1,K,16,15,"ng-container",13),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.repliesArray)}}function W(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"article",45)(1,"div",46)(2,"form",47,48)(4,"mat-form-field",49)(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"textarea",50),e.qZA(),e.TgZ(9,"div",51)(10,"button",52),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.toggleReplyBox(r.postIndex))}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"div",4),e.TgZ(14,"button",53),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.triggerSubmitReply(r.post,r.postIndex))}),e.TgZ(15,"mat-icon"),e._uU(16,"reply"),e.qZA(),e._uU(17),e.ALo(18,"translate"),e.qZA()()()(),e.TgZ(19,"div",54),e._UZ(20,"div",55),e.qZA()()}if(2&o){const t=e.MAs(3),s=e.oxw();e.xp6(2),e.Q6J("formGroup",s.postReplyFormGroup),e.xp6(4),e.hij(" ",e.lcZ(7,5,"Type you reply here")," "),e.xp6(5),e.hij(" ",e.lcZ(12,7,"Close")," "),e.xp6(3),e.Q6J("disabled","INVALID"===t.form.status),e.xp6(3),e.hij(" ",e.lcZ(18,9,"Reply")," ")}}const z=function(o,n){return{"icon-like":o,"icon-liked":n}};let ee=(()=>{class o{constructor(t){this.appStore=t,this.deleteReplyEmitter=new e.vpe,this.toggleReplyBoxEmitter=new e.vpe,this.toggleAllReplyBoxEmitter=new e.vpe,this.updateLikesEmitter=new e.vpe,this.triggerPostTagFilterEmitter=new e.vpe,this.deletePostEmitter=new e.vpe,this.triggerSubmitReplyEmitter=new e.vpe,this.tourAnchorId="",this.showHideReplySection=!1,this.postReplyFormGroup=new a.nJ({reply:new a.p4("",[a.kI.required,a.kI.max(255)])})}ngOnInit(){this.tourAnchorId="true"==this.tourAnchor?"post-details":""}deleteReply(t,s){this.deleteReplyEmitter.emit(t)}toggleReplyBox(t){this.toggleReplyBoxEmitter.emit(t),this.postReplyFormGroup.reset()}toggleAllReplyBox(t,s){this.toggleAllReplyBoxEmitter.emit(t)}updateLikes(t){this.updateLikesEmitter.emit(t)}triggerPostTagFilter(t){this.triggerPostTagFilterEmitter.emit(t)}deletePost(t){this.deletePostEmitter.emit(t)}triggerSubmitReply(t,s){let r=this.postReplyFormGroup.value.reply.trim();r&&r.length>0&&this.triggerSubmitReplyEmitter.emit(r),this.postReplyFormGroup.reset()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.d))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-farmers-cafe-post-child"]],inputs:{post:"post",postIndex:"postIndex",tourAnchor:"tourAnchor",selectedPostIndex:"selectedPostIndex",showAllReply:"showAllReply",repliesArray:"repliesArray",replies:"replies"},outputs:{deleteReplyEmitter:"deleteReplyEmitter",toggleReplyBoxEmitter:"toggleReplyBoxEmitter",toggleAllReplyBoxEmitter:"toggleAllReplyBoxEmitter",updateLikesEmitter:"updateLikesEmitter",triggerPostTagFilterEmitter:"triggerPostTagFilterEmitter",deletePostEmitter:"deletePostEmitter",triggerSubmitReplyEmitter:"triggerSubmitReplyEmitter"},decls:44,vars:30,consts:[["id","farmerCafeChildContainer"],["id","customerPostSection",1,"bdrRadius20px","mrgntop10","mrgnbtm10","bg-fffff",3,"tourAnchor"],[1,"pad10","flex","flexJustifyBetween"],["id","postUserDetails",1,"flex","flexAlignItemsCenter"],[1,"pad5"],[1,"fontWeight600","color-6a6a6a"],[1,"fontWeight400","font12"],[1,"flex"],[4,"ngIf"],[1,"pad15","color-6a6a6a"],[1,"flex","flexJustifyBetween","pad10"],[1,"flex","flexAlignItemsCenter","flexWrap"],["alt","Tag",1,"icns","d15","icon-tag","mrgn10"],[4,"ngFor","ngForOf"],["id","postReplies",1,"flex","flexAlignItemsCenter","mrgn5"],[1,"d22","mrgn5","color-808080"],[1,"color-808080"],[1,"flex","flexJustifyBetween","mrgntop10","pad10","bdrTop-dddddd"],[1,"flex","mrgn5",3,"click"],["alt","Like",1,"icns","d20","cursorPtr",3,"ngClass"],[1,"color-808080","mrgnleft5"],["mat-flat-button","","id","showTheMessagesResult",1,"color-1682FD","font12","mrgn5","flex","flexAlignItemsCenter",3,"click"],["mat-flat-button","","id","replyBoxPostButton",1,"color-1682FD","font12","mrgn5","flex","flexAlignItemsCenter",3,"click"],["id","postedMessagesSection","class","pad15 bdrRadius19px mrgnbtm10 bg-fffff mrgntop10",4,"ngIf"],["id","replyPostSection","class","pad15 bdrRadius19px mrgnbtm10 mrgntop10 bg-fffff",4,"ngIf"],["aria-label","More Vert","id","moteVertButton",1,"bdrNone","bg-none","cursorPtr",3,"matMenuTriggerFor"],[1,"color-black"],["xPosition","before",1,"txtWrap","posRelative","maxHeight300px"],["menuList","matMenu"],["mat-menu-item","","class","flex flexAlignItemsCenter color-6a6a6a","id","deletePostButton",3,"click",4,"ngIf"],["mat-menu-item","","id","deletePostButton",1,"flex","flexAlignItemsCenter","color-6a6a6a",3,"click"],[1,"mrgn0"],[1,"color-6a6a6a","font12"],["mat-raised-button","","id","triggetPostTagButton",1,"bg-eaeaea","bdrRadius19px","pad0010","color-6a6a6a","mat-chip","no-text-overflow",3,"click"],[1,"pad3"],[2,"display","inline"],["alt","Up Arrow",1,"icns","d15","icon-uparrow","flex",3,"ngClass"],["id","postedMessagesSection",1,"pad15","bdrRadius19px","mrgnbtm10","bg-fffff","mrgntop10"],[1,"pad10","flex","flexJustifyBetween",3,"id"],[1,"flex","flexAlignItemsCenter"],[1,"fontWeight400","color-6a6a6a","font12"],["aria-label","More Vert","id","viewMorePostButton",1,"bdrNone","bg-none","cursorPtr",3,"matMenuTriggerFor"],[1,"color-6a6a6a"],["mat-menu-item","","class","flex flexAlignItemsCenter color-6a6a6a","id","delteReplyPostButton",3,"click",4,"ngIf"],["mat-menu-item","","id","delteReplyPostButton",1,"flex","flexAlignItemsCenter","color-6a6a6a",3,"click"],["id","replyPostSection",1,"pad15","bdrRadius19px","mrgnbtm10","mrgntop10","bg-fffff"],[1,"width100"],[1,"width100",3,"formGroup"],["postReplyForm","ngForm"],["appearance","outline",1,"width100"],["formControlName","reply","name","post","matInput","","rows","6","id","replyPostsFarmerCafe",1,"resizeNone"],[1,"flex","flexAlignItemsCenter","flexJustifyEnd"],["mat-raised-button","","id","closeReplyPostButton",1,"bg-eaeaea","color-6a6a6a","boxShadowNone",3,"click"],["aria-label","Post","mat-raised-button","","color","accent","type","submit","id","submitReplyButton",3,"disabled","click"],[1,"flex","mrgntopM10"],[1,"mrgn10","width80"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"article",1)(2,"div",2)(3,"div",3),e._UZ(4,"div"),e.ALo(5,"uppercase"),e._UZ(6,"div",4),e.TgZ(7,"div",5),e._uU(8),e.TgZ(9,"div",6),e._uU(10),e.ALo(11,"date"),e.ALo(12,"dateAgo"),e.qZA()()(),e.TgZ(13,"div",7),e.YNc(14,q,7,2,"ng-container",8),e.qZA()(),e.TgZ(15,"div",9),e._uU(16),e.qZA(),e.TgZ(17,"div",10)(18,"div",11),e._UZ(19,"i",12),e.YNc(20,Q,4,3,"ng-container",8),e.YNc(21,H,4,1,"ng-container",13),e.qZA(),e.TgZ(22,"div",14)(23,"span",15)(24,"mat-icon"),e._uU(25,"chat_bubble_outline"),e.qZA()(),e.TgZ(26,"div",16),e._uU(27),e.qZA()()(),e.TgZ(28,"div",17)(29,"div",18),e.NdJ("click",function(){return s.updateLikes(s.post)}),e._UZ(30,"i",19),e.TgZ(31,"div",20),e._uU(32),e.YNc(33,D,3,0,"ng-container",8),e.qZA()(),e.TgZ(34,"div")(35,"button",21),e.NdJ("click",function(){return s.toggleAllReplyBox(s.postIndex,s.post._id)}),e.YNc(36,$,3,5,"ng-container",8),e.qZA(),e.TgZ(37,"button",22),e.NdJ("click",function(){return s.toggleReplyBox(s.postIndex)}),e.TgZ(38,"mat-icon"),e._uU(39,"reply"),e.qZA(),e._uU(40),e.ALo(41,"translate"),e.qZA()()(),e.YNc(42,V,2,1,"article",23),e.YNc(43,W,21,11,"article",24),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("tourAnchor",s.tourAnchorId),e.xp6(3),e.uIk("post-letters",e.lcZ(5,18,(null==s.post||null==s.post.user?null:s.post.user.first_name[0])+""+(null==s.post||null==s.post.user?null:s.post.user.last_name[0]))),e.xp6(4),e.AsE(" ",null==s.post||null==s.post.user?null:s.post.user.first_name," ",null==s.post||null==s.post.user?null:s.post.user.last_name," "),e.xp6(2),e.AsE(" ",e.xi3(11,20,null==s.post?null:s.post.createdAt,"MMM d, YYY hh:mm a")," | ",e.lcZ(12,23,null==s.post?null:s.post.createdAt)," "),e.xp6(4),e.Q6J("ngIf",(null==s.post||null==s.post.user?null:s.post.user._id)==(null==s.appStore||null==s.appStore.user?null:s.appStore.user._id)),e.xp6(2),e.hij(" ",null==s.post?null:s.post.post_description," "),e.xp6(4),e.Q6J("ngIf",!(null!=s.post&&s.post.tags.length)),e.xp6(1),e.Q6J("ngForOf",null==s.post?null:s.post.tags),e.xp6(6),e.Oqu((null==s.post?null:s.post.replies)||"0"),e.xp6(3),e.Q6J("ngClass",e.WLB(27,z,!s.post.has_liked,s.post.has_liked)),e.xp6(2),e.hij(" ",s.post.likes_count?s.post.likes_count:""," "),e.xp6(1),e.Q6J("ngIf",s.post.has_liked),e.xp6(3),e.Q6J("ngIf",null==s.post?null:s.post.replies),e.xp6(4),e.hij(" ",e.lcZ(41,25,"Reply")," "),e.xp6(2),e.Q6J("ngIf",s.post.showAllReply&&s.selectedPostIndex==s.postIndex),e.xp6(1),e.Q6J("ngIf",null==s.post?null:s.post.reply_box))},dependencies:[u.mk,u.sg,u.O5,A.KE,A.hX,k.Nt,F.VK,F.OP,F.p6,U.Hw,b.lW,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,y.JA,u.gd,u.uU,h.X$,J.R],styles:["[post-letters][_ngcontent-%COMP%]:before{content:attr(post-letters);display:flex;align-items:center;justify-content:center;font-size:1em;width:30px;height:30px;font-size:15px;text-align:center;border-radius:50%;background:#327a38;color:#fff}"]}),o})();function te(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-farmers-cafe-post-child",2),e.NdJ("deleteReplyEmitter",function(r){e.CHM(t);const i=e.oxw().$implicit,p=e.oxw();return e.KtG(p.deleteReply(r,i))})("toggleReplyBoxEmitter",function(){e.CHM(t);const r=e.oxw().index,i=e.oxw();return e.KtG(i.toggleReplyBox(r))})("toggleAllReplyBoxEmitter",function(){e.CHM(t);const r=e.oxw(),i=r.index,p=r.$implicit,d=e.oxw();return e.KtG(d.toggleAllReplyBox(i,p._id))})("triggerSubmitReplyEmitter",function(r){e.CHM(t);const i=e.oxw(),p=i.$implicit,d=i.index,T=e.oxw();return e.KtG(T.triggerSubmitReply(r,p,d))})("updateLikesEmitter",function(){e.CHM(t);const r=e.oxw().$implicit,i=e.oxw();return e.KtG(i.updateLikes(r))})("triggerPostTagFilterEmitter",function(r){e.CHM(t);const i=e.oxw(2);return e.KtG(i.triggerPostTagFilter(r))})("deletePostEmitter",function(){e.CHM(t);const r=e.oxw().$implicit,i=e.oxw();return e.KtG(i.deletePost(r))}),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(),s=t.$implicit,r=t.index,i=e.oxw();e.xp6(1),e.Q6J("post",s)("postIndex",r)("selectedPostIndex",i.selectedPostIndex)("showAllReply",i.showAllReply)("repliesArray",i.repliesArray)("tourAnchor","true")}}function se(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-farmers-cafe-post-child",3),e.NdJ("deleteReplyEmitter",function(r){e.CHM(t);const i=e.oxw().$implicit,p=e.oxw();return e.KtG(p.deleteReply(r,i))})("toggleReplyBoxEmitter",function(){e.CHM(t);const r=e.oxw().index,i=e.oxw();return e.KtG(i.toggleReplyBox(r))})("toggleAllReplyBoxEmitter",function(){e.CHM(t);const r=e.oxw(),i=r.index,p=r.$implicit,d=e.oxw();return e.KtG(d.toggleAllReplyBox(i,p._id))})("triggerSubmitReplyEmitter",function(r){e.CHM(t);const i=e.oxw(),p=i.$implicit,d=i.index,T=e.oxw();return e.KtG(T.triggerSubmitReply(r,p,d))})("updateLikesEmitter",function(){e.CHM(t);const r=e.oxw().$implicit,i=e.oxw();return e.KtG(i.updateLikes(r))})("triggerPostTagFilterEmitter",function(r){e.CHM(t);const i=e.oxw(2);return e.KtG(i.triggerPostTagFilter(r))})("deletePostEmitter",function(){e.CHM(t);const r=e.oxw().$implicit,i=e.oxw();return e.KtG(i.deletePost(r))}),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(),s=t.$implicit,r=t.index,i=e.oxw();e.xp6(1),e.Q6J("post",s)("postIndex",r)("selectedPostIndex",i.selectedPostIndex)("showAllReply",i.showAllReply)("repliesArray",i.repliesArray)}}function re(o,n){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,te,2,6,"ng-container",1),e.YNc(2,se,2,5,"ng-container",1),e.qZA()),2&o){const t=n.first;e.xp6(1),e.Q6J("ngIf",t),e.xp6(1),e.Q6J("ngIf",!t)}}let x=(()=>{class o{constructor(t,s,r,i,p){this.customerForumService=t,this.appStore=s,this.appService=r,this.router=i,this.translate=p,this._destroy=new R.x,this.showAllReply=!1,this.repliesArray=[],this.postsArray=[],this.postTagFilter=new e.vpe,this.display=!1,this.filters={},this.getTopTags=new e.vpe,this.skip=0,this.activityFilters={},this.totalRecords=0,this.postReplyFormGroup=new a.nJ({reply:new a.p4("",[a.kI.required,a.kI.max(255)])})}ngOnInit(){this.appStore.isLoggedIn()&&this.appStore.user._id?this.loadFarmersCafePost():this.appService.verifyUserEmitter.pipe((0,m.R)(this._destroy)).subscribe(t=>{t&&this.loadFarmersCafePost()}),this.customerForumService.postFilter.pipe((0,m.R)(this._destroy)).subscribe(t=>{t&&(this.postsArray=[],this.loadFarmersCafePost())})}loadFarmersCafePost(){this.router.url.includes("my-activities")&&(this.isMyActivityTriggered=!0),this.isMyActivityTriggered&&(this.filters={skip:0,user_id:this.appStore?.user?._id},this.getPosts(this.filters))}ngAfterViewInit(){(0,E.R)(window,"scroll").pipe((0,I.b)(1e3),(0,P.b)(t=>{this.onWindowScroll()})).pipe((0,m.R)(this._destroy)).subscribe()}getUpdatedRecords(){this.isMyActivityTriggered?this.getPosts(this.activityFilters):this.getUpdatedPostsAndTopTags(this.filters)}getUpdatedPostsAndTopTags(t){Promise.all([this.getPosts(t),this.getTopTags.emit()])}deletePost(t){this.customerForumService.deletePost(t).pipe((0,m.R)(this._destroy)).subscribe(s=>{s?.status?(this.postsArray.splice(this.postsArray.indexOf(t),1),this.display=0==this.postsArray.length,this.totalRecords=this.postsArray.length,this.getTopTags.emit(),this.showAllReply=!1,this.appStore.toggleSnackBar({icon:"check_circle",message:"Post deleted successfully.",className:"success",closeIcon:"close"})):this.appStore.toggleSnackBar({icon:null,message:"An error occurred.",className:"error",closeIcon:"close"})},s=>{let r;switch(s.status){case l.Mx.NOT_FOUND:r=l.XO.API_NOT_FOUND_ERROR_MESSAGE;break;case l.Mx.INTERNAL_ERROR:r=l.XO.INTERNAL_SERVER_ERROR_ERROR_MESSAGE;break;case l.Mx.UNAUTHORIZED:r=l.XO.API_UNAUTHORIZED_ERROR_MESSAGE;break;default:r=l.XO.DEFAULT_ERROR_MESSAGE}this.appStore.toggleSnackBar({icon:null,message:r,className:"error",closeIcon:"close"})})}deleteReply(t,s){this.customerForumService.deleteReply(t).pipe((0,m.R)(this._destroy)).subscribe(r=>{if(r?.status){let i=this.repliesArray.indexOf(t);this.repliesArray.splice(i,1);let p=this.postsArray.indexOf(s);this.postsArray[p].replies-=1,this.getUpdatedPostsAndTopTags(this.filters),this.customerForumService.postFilter.next(!0),this.appStore.toggleSnackBar({icon:"check_circle",message:"Reply deleted successfully.",className:"success",closeIcon:"close"})}else this.appStore.toggleSnackBar({icon:null,message:"An error occurred.",className:"error",closeIcon:"close"})},r=>{let i;switch(r.status){case l.Mx.NOT_FOUND:i=l.XO.API_NOT_FOUND_ERROR_MESSAGE;break;case l.Mx.INTERNAL_ERROR:i=l.XO.INTERNAL_SERVER_ERROR_ERROR_MESSAGE;break;case l.Mx.UNAUTHORIZED:i=l.XO.API_UNAUTHORIZED_ERROR_MESSAGE;break;default:i=l.XO.DEFAULT_ERROR_MESSAGE}this.appStore.toggleSnackBar({icon:null,message:i,className:"error",closeIcon:"close"})})}submitReply(t,s,r){this.customerForumService.submitReply(t).pipe((0,m.R)(this._destroy)).subscribe(i=>{let{error:p,message:d}=i;this.appStore.toggleSnackBar(p?{icon:null,message:d,className:"error",closeIcon:"close"}:{icon:"check_circle",message:d,className:"success",closeIcon:"close"}),this.postReplyFormGroup.reset(),this.toggleAllReplyBox(s,t.post_id),this.selectedPostIndex=s,this.showAllReply=!0,this.postsArray[s].showAllReply=!0,this.postsArray[s].showHideReplySection=!0,this.postsArray[s].replies+=1,this.filters.skip=0,this.filters.resetFilters=!0,this.getUpdatedPostsAndTopTags(this.filters),this.customerForumService.postFilter.next(!0),this.postsArray[s]&&this.postsArray[s].reply_box&&(this.postsArray[s].reply_box=!1),this.repliesArray=this.getReplies(t.post_id)},i=>{let p;switch(i.status){case l.Mx.NOT_FOUND:p=l.XO.API_NOT_FOUND_ERROR_MESSAGE;break;case l.Mx.INTERNAL_ERROR:p=l.XO.INTERNAL_SERVER_ERROR_ERROR_MESSAGE;break;case l.Mx.UNAUTHORIZED:p=l.XO.API_UNAUTHORIZED_ERROR_MESSAGE;break;default:p=l.XO.DEFAULT_ERROR_MESSAGE}this.appStore.toggleSnackBar({icon:null,message:p,className:"error",closeIcon:"close"})})}onWindowScroll(){let t=(document.documentElement.scrollTop||document.body.scrollTop)+document.documentElement.offsetHeight,s=document.documentElement.scrollHeight;t>Math.round(.7*s)&&this.postsArray.length<this.totalRecords&&((this.filters.skip||0==this.filters.skip)&&(this.filters.skip+=15,this.filters.resetFilters=!1),this.getUpdatedPostsAndTopTags(this.filters))}getPosts(t){this.display=!1,this.customerForumService.getPosts(t).pipe((0,m.R)(this._destroy)).subscribe(s=>(s?.totalRecords[0]?.count>0&&(this.totalRecords=s?.totalRecords[0]?.count,this.display=!1),s?.data&&0!==s?.data?.length||0!=t.skip?(this.postsArray.push(...s.data),this.postsArray.length&&this.postsArray.map((r,i)=>(this.postsArray[i].has_liked=r?.likes.includes(this.appStore.user._id),this.postsArray[i].likes_count=r?.likes.length,r.reply_box=!1,r.showHideReplySection=!1,r.showAllReply=!1,r)),this.postsArray):(this.display=!0,this.postsArray=[])))}triggerSubmitReply(t,s,r){t&&t.length>0&&this.submitReply({reply:t,user:this.appStore.user._id,post_id:s._id,post_description:s.post_description,user_to_be_notified:s.user._id,user_name:this.appStore.user.first_name+" "+this.appStore.user.last_name},r,s),this.postReplyFormGroup.reset()}toggleReplyBox(t){this.postsArray[t].reply_box=!this.postsArray[t].reply_box,this.postsArray[t].showAllReply=!1,this.postsArray[t].showHideReplySection=!1,this.showAllReply=!1,this.selectedPostIndex=t,this.postReplyFormGroup.reset()}toggleAllReplyBox(t,s){this.showAllReply=!this.showAllReply,this.postsArray.forEach((r,i)=>{i!=t&&(r.showHideReplySection=!1,r.showAllReply=!1)}),this.postsArray[t].showAllReply=!this.postsArray[t].showAllReply,this.postsArray[t].showHideReplySection=!this.postsArray[t].showHideReplySection,this.selectedPostIndex=t,this.postsArray[t].showAllReply&&(this.repliesArray=this.getReplies(s))}updateLikes(t){this.customerForumService.updateLike({user_id:this.appStore.user._id,post_id:t._id,user_name:this.appStore.user.first_name+" "+this.appStore.user.last_name}).pipe((0,m.R)(this._destroy)).subscribe(s=>{if(s?.nModified){let r=this.postsArray.indexOf(t);this.postsArray[r].has_liked=!this.postsArray[r].has_liked,this.postsArray[r].has_liked?++this.postsArray[r].likes_count:--this.postsArray[r].likes_count}},s=>{let r;switch(s.status){case l.Mx.NOT_FOUND:r=l.XO.API_NOT_FOUND_ERROR_MESSAGE;break;case l.Mx.INTERNAL_ERROR:r=l.XO.INTERNAL_SERVER_ERROR_ERROR_MESSAGE;break;case l.Mx.UNAUTHORIZED:r=l.XO.API_UNAUTHORIZED_ERROR_MESSAGE;break;default:r=l.XO.DEFAULT_ERROR_MESSAGE}this.appStore.toggleSnackBar({icon:null,message:r,className:"error",closeIcon:"close"})})}getReplies(t){this.customerForumService.getReplies(t).pipe((0,m.R)(this._destroy)).subscribe(s=>{this.repliesArray=s||[]})}triggerPostTagFilter(t){this.postTagFilter.emit(t)}ngOnDestroy(){this._destroy.next(!0),this._destroy.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C),e.Y36(_.d),e.Y36(v.z),e.Y36(g.F0),e.Y36(h.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-farmers-cafe-post"]],inputs:{tagsFilter:"tagsFilter",filters:"filters",isMyActivityTriggered:"isMyActivityTriggered"},outputs:{postTagFilter:"postTagFilter",display:"display",getTopTags:"getTopTags"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"post","postIndex","selectedPostIndex","showAllReply","repliesArray","tourAnchor","deleteReplyEmitter","toggleReplyBoxEmitter","toggleAllReplyBoxEmitter","triggerSubmitReplyEmitter","updateLikesEmitter","triggerPostTagFilterEmitter","deletePostEmitter"],[3,"post","postIndex","selectedPostIndex","showAllReply","repliesArray","deleteReplyEmitter","toggleReplyBoxEmitter","toggleAllReplyBoxEmitter","triggerSubmitReplyEmitter","updateLikesEmitter","triggerPostTagFilterEmitter","deletePostEmitter"]],template:function(t,s){1&t&&e.YNc(0,re,3,2,"div",0),2&t&&e.Q6J("ngForOf",s.postsArray)},dependencies:[u.sg,u.O5,y.JA,ee]}),o})();var N=c(266);const oe=function(){return["/farmers-cafe/discussion-board"]},ie=function(){return["/farmers-cafe/my-activities"]};function ne(o,n){1&o&&(e.ynx(0),e.TgZ(1,"div",5),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"div",6),e.TgZ(5,"div",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"div",6),e.BQk()),2&o&&(e.xp6(1),e.Q6J("routerLink",e.DdM(8,oe)),e.xp6(1),e.hij(" ",e.lcZ(3,4,"Discussion Board")," "),e.xp6(3),e.Q6J("routerLink",e.DdM(9,ie)),e.xp6(1),e.hij(" ",e.lcZ(7,6,"My Activities")," "))}const ae=function(){return["/farmers-cafe/guidelines"]};let Z=(()=>{class o{constructor(t){this.appStore=t}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.d))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-farmers-cafe-nav"]],decls:10,vars:9,consts:[[1,"flex","flexJustifyBetween","mrgn0510"],[1,"flex","flexAlignItemsCenter","color-6a6a6a","mrgn0","font24","fontWeight600"],["alt","Farmer's Caf\xe9",1,"icns","d50","icon-farmers-cafe","mrgn10"],[1,"pad10","flex","flexAlignItemsCenter","txtNoWrap","font18"],[4,"ngIf"],["routerLinkActive","bdrBtm-006330 color-success fontWeight600",1,"cursorPtr","color-6a6a6a",3,"routerLink"],[1,"pad10"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",3),e.YNc(6,ne,9,10,"ng-container",4),e.TgZ(7,"div",5),e._uU(8),e.ALo(9,"translate"),e.qZA()()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,4,"Farmers' Caf\xe9")," "),e.xp6(3),e.Q6J("ngIf",s.appStore.user.farmers_cafe_terms),e.xp6(1),e.Q6J("routerLink",e.DdM(8,ae)),e.xp6(1),e.hij(" ",e.lcZ(9,6,"Guidelines")," "))},dependencies:[u.O5,g.rH,g.Od,h.X$]}),o})();const le=["input"];function pe(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",33)(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"span",34),e.NdJ("click",function(){const i=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.removeFilterTag(i))}),e._uU(5," X"),e.qZA()(),e.BQk()}if(2&o){const t=n.$implicit;e.xp6(3),e.Oqu(t)}}function ce(o,n){if(1&o&&(e.TgZ(0,"div",31),e.YNc(1,pe,6,1,"ng-container",32),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",null==t.filters?null:t.filters.tags)}}function ue(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",41),e.NdJ("click",function(){const i=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.triggerFilter("tags",i))}),e._uU(2),e.TgZ(3,"span",42),e._uU(4),e.qZA()(),e.BQk()}if(2&o){const t=n.$implicit;e.xp6(2),e.hij(" ",t.name+" "," "),e.xp6(2),e.hij(" ",t.count," ")}}function me(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",35)(2,"article",36)(3,"div",37),e._UZ(4,"i",38),e._uU(5),e.ALo(6,"translate"),e._UZ(7,"i",39),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",40),e.YNc(10,ue,5,2,"ng-container",32),e.qZA()()(),e.BQk()),2&o){const t=e.oxw();e.xp6(5),e.hij(" ",e.lcZ(6,3,"Top Tags")," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(8,5,"Here we can show the top tags")),e.xp6(3),e.Q6J("ngForOf",t.topTags)}}let de=(()=>{class o{constructor(t,s,r,i,p,d,T,Ce){this.appService=t,this.customerForumService=s,this.appStore=r,this.router=i,this.route=p,this.location=d,this.tourService=T,this.translate=Ce,this._destroy=new R.x,this.postArray=[],this.topTags=[],this.filters={type:"new",search:"",resetFilters:!1,tags:[],skip:0},this.reply=new a.p4,this.post=new a.p4,this.top=!1,this.cafePostInstance=x,this.newPostFormGroup=new a.nJ({post_description:new a.p4("",[a.kI.required,a.kI.max(255),a.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]),tags:new a.p4("",[a.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)])}),this.postReplyFormGroup=new a.nJ({reply:new a.p4("",[a.kI.required,a.kI.max(255)])})}ngOnInit(){const t="true"===this.appStore.getStorage("forumGuide");this.appStore.setAppTitle("Farmers-cafe"),t&&(this.appStore.setStorage("forumGuide","false"),this.tourService.initialize(w.EI,w.NE),this.tourService.startAt("12")),this.appStore.isLoggedIn()&&this.appStore.user._id?this.loadFarmersCafe():this.appService.verifyUserEmitter.pipe((0,m.R)(this._destroy)).subscribe(s=>{s&&this.loadFarmersCafe()})}loadFarmersCafe(){let t=this.route.snapshot.paramMap.get("name");this.appStore.user.farmers_cafe_terms?t?(this.triggerFilter("tags",{name:t}),this.location.go("farmers-cafe/discussion-board")):this.cafePostInstance.getUpdatedPostsAndTopTags(this.filters):this.router.navigate(["farmers-cafe/guidelines"]),this.appService.getRecentTicketsEmitter.emit(!0),this.appService.getPostReplyNotificationEmitter.emit(!0)}ngAfterViewInit(){(0,E.R)(this.input.nativeElement,"keyup").pipe((0,O.h)(Boolean),(0,I.b)(300),(0,B.x)(),(0,P.b)(t=>{this.triggerFilter("search",this.input.nativeElement.value)})).subscribe()}triggerNew(){this.triggerFilter("new")}getTopTags(){this.appService.getTopTags().pipe((0,m.R)(this._destroy)).subscribe(t=>{t&&(this.topTags=t)})}submitPost(t){this.customerForumService.submitPost(t).pipe((0,m.R)(this._destroy)).subscribe(s=>{this.appStore.toggleSnackBar(s.status?{icon:"check_circle",message:s.message,className:"success",closeIcon:"close"}:{icon:null,message:s.error,className:"error",closeIcon:"close"}),this.newPostFormGroup.reset(),this.customerForumService.postFilter.next(!0),this.filters.resetFilters=!0,this.cafePostInstance.getUpdatedPostsAndTopTags(this.filters),this.filtersReset()},s=>{let r;switch(s.status){case l.Mx.NOT_FOUND:r=l.XO.API_NOT_FOUND_ERROR_MESSAGE;break;case l.Mx.INTERNAL_ERROR:r=l.XO.INTERNAL_SERVER_ERROR_ERROR_MESSAGE;break;case l.Mx.UNAUTHORIZED:r=l.XO.API_UNAUTHORIZED_ERROR_MESSAGE;break;default:r=l.XO.DEFAULT_ERROR_MESSAGE}this.appStore.toggleSnackBar({icon:null,message:r,className:"error",closeIcon:"close"})})}triggerSubmitPost(){let t=[];this.newPostFormGroup.value.tags?.split(" ").forEach(r=>{r.length&&(r.trim(),t.push("#"==r[0]?r:`#${r}`))}),this.submitPost({post_description:this.newPostFormGroup.value.post_description,user:this.appStore.user._id,tags:t}),this.newPostFormGroup.reset()}processPostTagFilter(t){this.triggerFilter("tags",t)}triggerFilter(t,s=""){switch(this.filters.resetFilters=t!==this.filters.type,this.filters.skip=0,this.customerForumService.postFilter.next(!0),t){case"new":this.top=!1,this.filters.type="new",this.cafePostInstance.getUpdatedPostsAndTopTags(this.filters);break;case"top":this.top=!0,this.filters.type="top",this.cafePostInstance.getUpdatedPostsAndTopTags(this.filters);break;case"search":(s||0===s.length)&&(this.filters.search=s,this.cafePostInstance.getUpdatedPostsAndTopTags(this.filters));break;case"tags":s&&(this.filters.tags?.includes(s?.name)||this.filters.tags?.push(s?.name),this.cafePostInstance.getUpdatedPostsAndTopTags(this.filters));break;default:this.cafePostInstance.getUpdatedPostsAndTopTags(this.filters)}}filtersReset(){return this.filters={type:"new",search:"",resetFilters:!1,tags:[],skip:0}}removeFilterTag(t){this.filters.tags=this.filters.tags.filter(s=>s!==t),this.cafePostInstance.getUpdatedPostsAndTopTags(this.filters),this.customerForumService.postFilter.next(!0)}ngOnDestroy(){this.appStore.setStorage("forumGuide","false"),this._destroy.next(!0),this._destroy.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.z),e.Y36(C),e.Y36(_.d),e.Y36(g.F0),e.Y36(g.gz),e.Y36(u.Ye),e.Y36(y.QL),e.Y36(h.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-customer-forum"]],viewQuery:function(t,s){if(1&t&&(e.Gf(le,7),e.Gf(x,7)),2&t){let r;e.iGM(r=e.CRH())&&(s.input=r.first),e.iGM(r=e.CRH())&&(s.cafePostInstance=r.first)}},decls:61,vars:25,consts:[["tourAnchor","farmer-cafe",1,"centered-tour-element"],["id","customerForumContainer",1,"flex","flexJustifyBetween","flexAlignItemsStretch","minHeight100vh"],[1,"width100","pad5"],[1,"flex","flexResponsive","flexJustifyBetween","flexAlignItemsStretch","lineHeight24px"],["id","customerForumForm",1,"width70","pad10"],["id","customerForumFilterButtons",1,"flex","flexAlignItemsBaseline","flexResponsive"],[1,"flex","flexAlignItemsCenter"],["mat-stroked-button","","id","newForumFilterButton",1,"boxShadowNone",3,"ngClass","click"],[1,"font20"],[1,"pad5"],["mat-stroked-button","","id","topForumFilterButton",1,"boxShadowNone",3,"ngClass","click"],["id","forumTextDescription",1,"flex","flexAlignItemsCenter"],["appearance","outline",1,"width256px","field-height"],["type","text","matInput","","id","searchPost"],["input",""],[1,"flex","flexDirectionCol","flexAlignItemsCenter"],["id","tagFilterPost","class","width100 flex bdrRadius10px mrgnbtm10 bg-fffff pad10",4,"ngIf"],["id","postDescriptionSection",1,"pad15","bdrRadius19px","boxShadowDown","bg-fffff"],[1,"row",3,"formGroup"],["newPostForm","ngForm"],["tourAnchor","create-post",1,"flex","flexDirectionCol","flexAlignItemsCenter","step_20"],["appearance","outline",1,"width100"],["formControlName","post_description","name","post","matInput","","rows","6","id","postDescriptionTextArea",1,"resizeNone"],[1,"flex","flexDirectionCol","flexAlignItemsCenter","field-height"],["matInput","","formControlName","tags","name","tags","matInput","","autocomplete","off","maxlength","50","id","postTagField"],[1,"flex","flexAlignItemsCenter","flexJustifyBetween"],["type","reset","mat-raised-button","","id","postResetButton",1,"bg-eaeaea","color-6a6a6a","boxShadowNone",3,"click"],["aria-label","Post","mat-raised-button","","color","accent","id","customerForumPostButton",3,"disabled","click"],["alt","Vector",1,"icns","d15","icon-Vector"],["id","appFarmersCafePost",3,"filters","postTagFilter","getTopTags"],[4,"ngIf"],["id","tagFilterPost",1,"width100","flex","bdrRadius10px","mrgnbtm10","bg-fffff","pad10"],[4,"ngFor","ngForOf"],["mat-raised-button","","id","filterTagCustomerForum",1,"bg-eaeaea","bdrRadius19px","mrgnbtm10","margin-right10","mrgntop10","mrgn5","mat-chip"],[3,"click"],[1,"width30","pad10","flex","flexDirectionCol"],["id","topTagsSection","tourAnchor","tags",1,"bgWhite","color-6a6a6a","bdrRadius19px","boxShadowDown","bg-fffff"],[1,"flex","flexAlignItemsCenter","bdrBtm-dddddd","mrgn0","color-6a6a6a","font16","fontWeight600","pad10"],["alt","Star",1,"icns","d20","icon-star","mrgn10"],["aria-label","Button that displays a tooltip when focused or hovered over","alt","Information",1,"icns","d22","icon-Information","mrgnleft",3,"matTooltip"],[1,"flex","flexWrap","pad5","mrgn10"],["mat-raised-button","","id","topTagsButton",1,"bg-eaeaea","bdrRadius19px","pad0010","color-6a6a6a","margin-right10","margin-top10","mat-chip","no-text-overflow",3,"click"],[1,"bdrRadius50px","pad0310","font12","color-white",2,"background-color","rgb(162, 162, 162)"]],template:function(t,s){if(1&t){const r=e.EpF();e._UZ(0,"div",0),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"app-farmers-cafe-nav"),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"button",7),e.NdJ("click",function(){return s.triggerFilter("new")}),e.TgZ(9,"mat-icon",8),e._uU(10,"access_time"),e.qZA(),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"div",9),e.TgZ(14,"button",10),e.NdJ("click",function(){return s.triggerFilter("top")}),e.TgZ(15,"mat-icon",8),e._uU(16,"arrow_upward"),e.qZA(),e._uU(17),e.ALo(18,"translate"),e.qZA()(),e._UZ(19,"div",9),e.TgZ(20,"div",11)(21,"mat-form-field",12)(22,"mat-label"),e._uU(23,"Search posts or tags"),e.qZA(),e._UZ(24,"input",13,14),e.qZA()()(),e.TgZ(26,"div",15),e.YNc(27,ce,2,1,"div",16),e.qZA(),e.TgZ(28,"article",17)(29,"form",18,19)(31,"div",20)(32,"mat-form-field",21)(33,"mat-label"),e._uU(34),e.ALo(35,"translate"),e.qZA(),e._UZ(36,"textarea",22),e.qZA()(),e.ynx(37),e.TgZ(38,"div",23)(39,"mat-form-field",21)(40,"mat-label"),e._uU(41),e.ALo(42,"translate"),e.qZA(),e._UZ(43,"input",24),e.TgZ(44,"mat-hint")(45,"b"),e._uU(46,"Note:"),e.qZA(),e._uU(47," By adding a space between words, two separate tags will be created."),e.qZA()()(),e.TgZ(48,"div",25),e._UZ(49,"div"),e.TgZ(50,"div",25)(51,"button",26),e.NdJ("click",function(){e.CHM(r);const p=e.MAs(30);return e.KtG(p.form.reset())}),e._uU(52),e.ALo(53,"translate"),e.qZA(),e._UZ(54,"div",9),e.TgZ(55,"button",27),e.NdJ("click",function(){return s.triggerSubmitPost()}),e._UZ(56,"i",28),e._uU(57),e.ALo(58,"translate"),e.qZA()()(),e.BQk(),e.qZA()(),e.TgZ(59,"app-farmers-cafe-post",29),e.NdJ("postTagFilter",function(p){return s.processPostTagFilter(p)})("getTopTags",function(){return s.getTopTags()}),e.qZA()(),e.YNc(60,me,11,7,"ng-container",30),e.qZA()()()}if(2&t){const r=e.MAs(30);e.xp6(8),e.Q6J("ngClass","new"==s.filters.type?"bg-1b5e20 color-white":"bdr-06230 color-6a6a6a"),e.xp6(3),e.hij(" ",e.lcZ(12,13,"New")," "),e.xp6(3),e.Q6J("ngClass","top"==s.filters.type?"bg-1b5e20 color-white":"bdr-06230 color-6a6a6a"),e.xp6(3),e.hij(" ",e.lcZ(18,15,"Top")," "),e.xp6(10),e.Q6J("ngIf",(null==s.filters.tags?null:s.filters.tags.length)>0),e.xp6(2),e.Q6J("formGroup",s.newPostFormGroup),e.xp6(5),e.Oqu(e.lcZ(35,17,"Type your post here")),e.xp6(7),e.hij(" ",e.lcZ(42,19,"Type your tags here")," "),e.xp6(11),e.hij(" ",e.lcZ(53,21,"Reset")," "),e.xp6(3),e.Q6J("disabled","INVALID"===r.form.status),e.xp6(2),e.hij(" ",e.lcZ(58,23,"Post")," "),e.xp6(2),e.Q6J("filters",s.filters),e.xp6(1),e.Q6J("ngIf",(null==s.topTags?null:s.topTags.length)>0)}},dependencies:[u.mk,u.sg,u.O5,A.KE,A.bx,A.hX,k.Nt,U.Hw,b.lW,N.gM,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,y.JA,Z,x,h.X$]}),o})();var ge=c(6709);function fe(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",14),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.triggerFarmersCafeTerms())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.termsChecked),e.xp6(1),e.hij(" ",e.lcZ(3,2,"Agree")," ")}}let _e=(()=>{class o{constructor(t,s,r){this.appStore=t,this.appService=s,this.router=r,this._destroy=new R.x,this.guidelinesReadonly=!0,this.guidelinesFormGroup=new a.nJ({farmers_cafe_terms:new a.p4(this.appStore.user.farmers_cafe_terms,[a.kI.required])})}ngOnInit(){this.appStore.setAppTitle("Farmers-cafe"),this.appStore.isLoggedIn()&&this.appStore.user._id?this.loadFarmersCafeGuidelines():this.appService.verifyUserEmitter.pipe((0,m.R)(this._destroy)).subscribe(t=>{t&&this.loadFarmersCafeGuidelines()})}loadFarmersCafeGuidelines(){this.guidelinesFormGroup.patchValue({farmers_cafe_terms:this.appStore.user.farmers_cafe_terms}),this.getGuidelinesProperties()}triggerFarmersCafeTerms(){this.appService.agreeFarmersCafeTerms().pipe((0,m.R)(this._destroy)).subscribe(t=>{this.appStore.user.farmers_cafe_terms=!0,this.getGuidelinesProperties(),this.router.navigate(["farmers-cafe"])})}getGuidelinesProperties(){this.guidelinesReadonly=this.appStore.user.farmers_cafe_terms,this.appStore.user.farmers_cafe_terms&&this.guidelinesFormGroup.get("farmers_cafe_terms")?.disable()}get termsChecked(){return this.guidelinesFormGroup.get("farmers_cafe_terms")?.value}ngOnDestroy(){this._destroy.next(!0),this._destroy.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.d),e.Y36(v.z),e.Y36(g.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-farmers-cafe-guidelines"]],decls:69,vars:8,consts:[[1,"flex","flexJustifyBetween","flexAlignItemsStretch","minHeight90vh"],[1,"width100","pad5","padbtm50"],[1,"flex","flexResponsive","flexJustifyBetween","flexAlignItemsStretch","lineHeight24px","pad15"],["tourAnchor","guidelines",1,"bdrRadius19px","bg-fffff","pad15"],[1,"row",3,"formGroup"],["guidelinesForm","ngForm"],[1,"mrgn10"],[1,"flex","flexJustifyBetween","color-6a6a6a","font24","fontWeight600"],["aria-label","Button that displays a tooltip when focused or hovered over","alt","Information",1,"icns","d22","icon-Information","mrgnleft",3,"matTooltip"],[1,"width100","pad15","color-6a6a6a"],[1,"pad10","mrgntop10"],["formControlName","farmers_cafe_terms"],[1,"flex","flexJustifyEnd"],[4,"ngIf"],["mat-raised-button","","color","accent","aria-label","Agree",3,"disabled","click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-farmers-cafe-nav"),e.TgZ(3,"div",2)(4,"article",3)(5,"form",4,5)(7,"div",6)(8,"div",7)(9,"span"),e._uU(10,"Forum Rules & Guidelines"),e.qZA(),e.TgZ(11,"span"),e._UZ(12,"i",8),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"div",9)(15,"div")(16,"h3")(17,"b"),e._uU(18,"1. No Spam / Advertising / Self-promotion in the forum."),e.qZA()(),e.TgZ(19,"span"),e._uU(20," The forum defines spam as unsolicited advertisement for goods, services and/or other web sites, or posts with little, or completely unrelated content. Do not spam the forum with links to your site or product, or try to self-promote your website, business or forums etc. Spamming also includes sending private messages to a large number of different users. "),e.qZA(),e.TgZ(21,"strong"),e._uU(22," DO NOT ASK for email addresses or phone numbers. Your account will be banned permanently and your posts will be deleted. "),e.qZA()(),e.TgZ(23,"div"),e._UZ(24,"br"),e.qZA(),e.TgZ(25,"div")(26,"h3")(27,"b"),e._uU(28,"2. Do not post infringing material."),e.qZA()(),e.TgZ(29,"span"),e._uU(30," Providing or asking for information on how to illegally obtain materials covered by a third party copyright, patent, trade secret, trademark or other proprietary right is forbidden. "),e.qZA()(),e.TgZ(31,"div"),e._UZ(32,"br"),e.qZA(),e.TgZ(33,"div")(34,"h3")(35,"b"),e._uU(36,"3. Do not post \u201coffensive\u201d posts, links or images."),e.qZA()(),e.TgZ(37,"span"),e._uU(38," Any material which constitutes misinformation, defamation, harassment, or abuse is strictly prohibited. Material that is violent, bullying, dangerous, sexually or otherwise obscene, racist, or otherwise discriminatory or harmful is not permitted on this forum. This includes user pictures. Use common sense while posting. This is a web site for agriculture professionals. "),e.qZA()(),e.TgZ(39,"div"),e._UZ(40,"br"),e.qZA(),e.TgZ(41,"div")(42,"h3")(43,"b"),e._uU(44,"4. Do not duplicate posts."),e.qZA()(),e.TgZ(45,"span"),e._uU(46," Please refrain from posting the same question multiple times. "),e.qZA()(),e.TgZ(47,"div"),e._UZ(48,"br"),e.qZA(),e.TgZ(49,"div")(50,"h3")(51,"b"),e._uU(52,"5. Do not private message users asking for help."),e.qZA()(),e.TgZ(53,"span"),e._uU(54," Do not send private messages to any users asking for help. If you need help, make a new post in the forum. By doing so, the whole community can help and benefit. "),e.qZA()(),e.TgZ(55,"div"),e._UZ(56,"br"),e.qZA(),e.TgZ(57,"div")(58,"h3")(59,"b"),e._uU(60,"6. Remain respectful of other members at all times."),e.qZA()(),e.TgZ(61,"span"),e._uU(62," All posts should be professional and courteous. You have every right to disagree with your fellow community members and explain your perspective. However, you are not free to attack, degrade, insult, or otherwise belittle them or the quality of this community. "),e.qZA()(),e.TgZ(63,"div",10)(64,"mat-checkbox",11),e._uU(65),e.ALo(66,"translate"),e.qZA()(),e.TgZ(67,"div",12),e.YNc(68,fe,4,4,"ng-container",13),e.qZA()()()()()()()),2&t&&(e.xp6(5),e.Q6J("formGroup",s.guidelinesFormGroup),e.xp6(7),e.s9C("matTooltip",e.lcZ(13,4,"Before you proceeding please follow the Forum Guidelines")),e.xp6(53),e.hij(" ",e.lcZ(66,6,"I have read and agree to the terms.")," "),e.xp6(3),e.Q6J("ngIf",!s.guidelinesReadonly))},dependencies:[u.O5,b.lW,ge.oG,N.gM,a._Y,a.JJ,a.JL,a.sg,a.u,y.JA,Z,h.X$]}),o})();var he=c(727),ye=c(2731);function xe(o,n){if(1&o&&(e.TgZ(0,"div",5),e._UZ(1,"app-empty-state",6),e.ALo(2,"translate"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("pageFrom","myActivity")("display",t.display)("message",e.lcZ(2,4,t.noActivity))("className","d620 icon-my-activity")}}const Ae=[{path:"",redirectTo:"discussion-board",pathMatch:"full"},{path:"discussion-board",component:de},{path:"my-activities",component:(()=>{class o{constructor(t,s,r){this.appStore=t,this.router=s,this.changeDetector=r,this.subscription=new he.w0,this.cafePostInstance=x,this.postTagFilter=new e.vpe,this.isMyActivityTriggered=!1,this.display=!1,this.noActivity=l.oP.NO_ACTIVITY}ngOnInit(){this.isMyActivityTriggered=!0,this.appStore.setAppTitle("Farmers-cafe")}processPostTagFilter(t){this.router.navigate(["farmers-cafe/discussion-board",t])}ngAfterViewChecked(){this.display=this.cafePostInstance.display,this.changeDetector.detectChanges()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.d),e.Y36(g.F0),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-farmers-cafe-my-activities"]],viewQuery:function(t,s){if(1&t&&e.Gf(x,5),2&t){let r;e.iGM(r=e.CRH())&&(s.cafePostInstance=r.first)}},outputs:{postTagFilter:"postTagFilter"},decls:6,vars:2,consts:[["id","myActivityContainer",1,"flex","flexJustifyBetween","flexAlignItemsStretch","overflowHidden","minHeight90vh"],[1,"width100","pad5","padbtm50"],["id","farmersCafePost",1,"lineHeight24px","pad15","width70"],[3,"isMyActivityTriggered","postTagFilter"],["id","emptyStateMyActivity","class","bgWhite width70 bdrRadius19px pad20 emty-state-mrgn",4,"ngIf"],["id","emptyStateMyActivity",1,"bgWhite","width70","bdrRadius19px","pad20","emty-state-mrgn"],[3,"pageFrom","display","message","className"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-farmers-cafe-nav"),e.TgZ(3,"div",2)(4,"app-farmers-cafe-post",3),e.NdJ("postTagFilter",function(i){return s.processPostTagFilter(i)}),e.qZA()(),e.YNc(5,xe,3,6,"div",4),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("isMyActivityTriggered",s.isMyActivityTriggered),e.xp6(1),e.Q6J("ngIf",s.display))},dependencies:[u.O5,ye.s,Z,x,h.X$],styles:[".emty-state-mrgn[_ngcontent-%COMP%]{margin:15px}@media only screen and (max-width: 768px){.emty-state-mrgn[_ngcontent-%COMP%]{margin:0}}"]}),o})()},{path:"guidelines",component:_e}];let Te=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.Bz.forChild(Ae),g.Bz]}),o})(),Re=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[C],imports:[u.ez,M.m,Te,g.Bz,a.UX,y.jo]}),o})()}}]);